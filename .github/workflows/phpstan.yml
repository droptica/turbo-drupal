name: Drupal static analysis tool

on:
  # Run on all pushes and on all pull requests.
  # Prevent the build from running when there are only irrelevant changes.
  push:
    paths-ignore:
      - '**.md'
  pull_request:
    paths-ignore:
      - '**.md'

jobs:
  phpstan:
    name: "PHPStan Static analysis tool"

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Install Composer dependencies
      run: composer install --no-scripts --no-progress

    - name: Install PHPStan as a dev dependency
      run: composer require --dev phpstan/phpstan

    - name: Run PHPStan
      run: vendor/bin/phpstan analyse --configuration=phpstan.neon
